package models

import (
	"bytes"
	"encoding/json"
	"fmt"
	"io"
	"log"
	"net/http"
	"strings"
	"sync"
	"testing"

	"github.com/nft-rainbow/rainbow-app-service/models/enums"
	"github.com/pkg/errors"
	"github.com/spf13/viper"
	"github.com/stretchr/testify/assert"
)

func TestUnmarshalWalletType(t *testing.T) {
	var w *enums.WalletType
	err := json.Unmarshal([]byte("\"cellar\""), &w)
	assert.NoError(t, err)
	assert.Equal(t, enums.WALLET_CELLAR, *w)
	fmt.Println(*w)

	type AddWalletUserReq struct {
		Wallet  enums.WalletType `json:"wallet"`
		Code    string           `json:"code"`
		Phone   string           `json:"phone"`
		Address string           `json:"address"`
	}
	var req *AddWalletUserReq
	err = json.Unmarshal([]byte(`{
		"wallet":"cellar",
		"phone": "17011112222",
		"address": "cfx:aamgvyzht7h1zxdghb9ee9w26wrz8rd3gj837392dp"
	}`), &req)
	assert.NoError(t, err)
	assert.Equal(t, enums.WALLET_CELLAR, req.Wallet)
	fmt.Println(*req)
}

func TestCellarAutoGenAccount(t *testing.T) {
	type (
		LoginReq struct {
			UserPhone string `json:"userPhone"`
		}

		LoginResp struct {
			Msg  string `json:"msg"`
			Code int    `json:"code"`
			Data struct {
				Wallet    string `json:"wallet"`
				UserPhone string `json:"userPhone"`
				UserCode  string `json:"userCode"`
			} `json:"data"`
		}
	)

	initConfig()
	ConnectDB()
	getOrCreateCellarAccount := func(phone string) (*LoginResp, error) {
		j, _ := json.Marshal(LoginReq{
			UserPhone: phone,
		})

		// url := "https://web-proxy.apifox.cn/api/v1/request"
		// req, err := http.NewRequest(http.MethodPost, url, bytes.NewBuffer(j))
		// if err != nil {
		// 	return nil, errors.WithMessage(err, "failed to new request")
		// }
		// req.Header.Add("authority", "web-proxy.apifox.cn")
		// req.Header.Add("accept", "*/*")
		// req.Header.Add("accept-language", "en,zh-CN;q=0.9,zh;q=0.8")
		// req.Header.Add("api-h0", "appId=3e438a5834cb43159fa45aad62671333, User-Agent=Apifox/1.0.0 (https://www.apifox.cn), Content-Type=application/json, Accept=*/*, Cache-Control=no-cache, Host=wallet.metacellar.art, Accept-Encoding=gzip%2C deflate%2C br, Connection=keep-alive")
		// req.Header.Add("api-o0", "method=POST, timings=true, timeout=300000, rejectUnauthorized=false")
		// req.Header.Add("api-u", "https://wallet.metacellar.art/web3/open/api/loginUnify")
		// req.Header.Add("authorization", "Apifox")
		// req.Header.Add("cache-control", "no-cache")
		// req.Header.Add("content-type", "application/json")
		// req.Header.Add("origin", "https://apifox.com")
		// req.Header.Add("pragma", "no-cache")
		// req.Header.Add("referer", "https://apifox.com/")
		// req.Header.Add("sec-ch-ua", "\"Google Chrome\";v=\"113\", \"Chromium\";v=\"113\", \"Not-A.Brand\";v=\"24\"")
		// req.Header.Add("sec-ch-ua-mobile", "?0")
		// req.Header.Add("sec-ch-ua-platform", "\"macOS\"")
		// req.Header.Add("sec-fetch-dest", "empty")
		// req.Header.Add("sec-fetch-mode", "cors")
		// req.Header.Add("sec-fetch-site", "cross-site")
		// req.Header.Add("user-agent", "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/113.0.0.0 Safari/537.36")

		url := "https://wallet.metacellar.art/web3/open/api/loginUnify"
		req, err := http.NewRequest(http.MethodPost, url, bytes.NewBuffer(j))
		if err != nil {
			return nil, errors.WithMessage(err, "failed to new request")
		}
		req.Header.Add("Content-Type", "application/json")
		req.Header.Add("appId", "3e438a5834cb43159fa45aad62671333")
		// req.Header.Add("User-Agent", "Apifox/1.0.0 (https://www.apifox.cn)")

		client := http.Client{}
		resp, err := client.Do(req)
		if err != nil {
			return nil, errors.WithMessage(err, "failed to send request")
		}
		defer resp.Body.Close()

		respStr, err := io.ReadAll(resp.Body)
		if err != nil {
			return nil, errors.WithMessage(err, "failed to read resp body")
		}
		// fmt.Printf("%s", respStr)

		var loginResp LoginResp
		err = json.Unmarshal(respStr, &loginResp)
		if err != nil {
			return nil, errors.New(string(respStr))
		}

		return &loginResp, nil
	}

	// phones := []string{"13801002119", "15000213993", "17621120707", "15921622994", "13916806458", "15800317710", "18516152755", "13917464505", "13917551392", "18551135246", "18616364192", "15221388202", "15317019727", "13601759353", "13910010736", "18612259808", "18622761582", "18610725188", "13581604789", "13801173937", "13911119915", "13811982633", "18600644955", "18611601283", "13910693263", "13901390327", "18601293232", "13901128896", "18001606211", "18721690240", "13524783506", "13564710264", "18621010161", "15221787719", "15237159743", "13633819323", "15210250457", "13918050767", "17521061512", "15000988890", "13581773044", "18611338755", "13916219053", "15801339851", "15300157948", "13716339879", "13601131216", "18657169800", "18800010130", "18210652790", "13810041267", "13401086534", "13570877827", "13502870099", "18601233708", "18511865687", "13556862273", "13911766509", "13925279675", "18611601287", "18601252758", "15000710557", "17671769834", "18019701556", "17721220703", "18761806661", "15026731850", "13311852757", "13761607205", "15921388181", "15201849910", "18816623603", "17612105027", "15300507530", "13916529711", "17333952319", "13040664808", "15727535969", "18907468584", "18859695070", "15000827727", "18621645618", "15200223637", "17851566715", "15139048425", "13261614466", "18359196787", "15216849575", "13816467302", "18879519272", "15716001535", "18721845675", "18217610083", "15928235250", "15168250513", "13275176127", "18816523521", "18521092014", "16601800453", "15821794338", "17317570082", "13162789830", "18260926476", "18917838203", "15061025097", "18844683326", "13817153130", "15296608718", "18217585645", "19121031401", "19833044582", "17370709218", "15000699639", "17751371033", "15301700961", "18272671487", "13140446388", "13141320916", "18898641262", "17319729271", "17262565996", "17521709671", "18001813559", "13701984625", "19859805751", "13761603245", "18521372756", "13916644639", "13524881662", "18521726710", "19121279946", "15137809805", "18389890115", "18389199593", "17329432246", "19939921970", "13061818925", "17621313233", "18302125040", "17345136080", "14787852515", "19921949278", "15800930743", "13482248773", "18812126921", "18878457270", "17752689191", "13905909202", "18065918766", "15202160858", "15738389908", "18703970339", "15893508220", "13564205583", "18717891580", "13764529018", "13262622621", "18707282824", "18142321423", "15810573935", "17719867417", "18964679792", "15729386393", "13067249782", "16601940928", "13575038857", "19503827929", "13151195531", "17317305872", "13566378183", "13782178905", "13943344914", "17521532119", "15637218882", "19712908711", "15093954463", "18539576862", "17521773495", "15198441050", "18930059310", "15856912878", "13148302912", "13358857145", "15754568896", "13181877055", "17521080351", "18162326943", "17766476172", "15045674966", "17889785265", "15546176395", "16601169236", "13234661226", "13570458100", "18818395957", "13728861484", "13136760006", "13727860573", "18574103229", "18115560039", "13526618083", "18638764385", "18339179903", "18838278502", "18217688993", "18189695479", "18621603146", "18621390621", "18918353386", "15900486917", "18070774282", "17301747428", "13524540410", "15938552091", "13020288640", "15623969372", "18165744122", "13127921159", "18621615915", "18652078573", "15058323885", "17621180743", "18019378186", "13122372218", "15255184374", "17691376924", "16638160930", "18916017231", "18261046371", "15250956816", "18356468121", "19821227931", "19821051125", "17316330591", "18503707307", "15959772752", "13818499501", "18799167753", "18236586947", "18622186897", "13701724876", "18703480729", "13929150127", "18638608713", "16621175172", "13156305677", "18261882295", "18535345716", "15366765512", "13636358069", "18538593793", "13399056775", "15283543292", "18295110828", "13079793168", "13675511470", "13761467797", "17315726385", "13601803615", "15727748567", "15900534093", "15000361429", "15617682762", "13386886833", "13588853071", "18621627745", "13482057904", "13370029075", "13122902629", "13717791722", "17357100109", "15283928996", "13502805330", "13691682888", "19982009383", "18583241990", "18086840787", "13816890395", "13810610783", "13733199262", "15603076594", "18511423995", "18518932676", "13421467855", "15392729333", "13381739775", "13170359832", "13249799381", "18612938898", "17328733360", "18401674238", "18310789378", "18038012697", "15604836929", "13590376572", "15339775086", "18500089279", "15011540445", "13916568974", "19928726429", "13632024086", "15116936766", "18716017977", "15132023306", "18035158224", "18410869308", "13253329860", "17770206788", "15101545489", "13699266365", "13504467196", "15220221384", "18117112267", "17810243180", "15072683827", "15216809205", "15814052650", "18603041166", "13810782180", "17621986983", "18801823453", "18618245866", "17611719935", "18665659346", "13001920709", "13581936787", "13544115812", "13983588037", "13880762115", "15801294786", "18616642426", "18762129279", "18793192150", "13918402703", "13128745311", "13728687960", "17701031628", "15021759006", "13621914566", "18917973999", "18846101261", "15818665396", "18355643661", "18612788038", "13621219960", "13910953079", "15800492365", "18713816090", "15889633610", "13522108551", "18221122107", "15277389059", "13758860397", "13528780621", "18515899629", "18911934978", "15612665932", "13693390221", "18810596944", "15009886332", "18925850351", "18072741812", "13501638008", "15811499891", "18610926578", "15727327268", "13261779169", "13823376052", "18858167131", "17812211849", "17318916809", "18721948461", "18238296110", "15159550982", "13916641420", "13692370117", "13510759275", "15210533417", "17674062712", "18344048718", "15361022567", "13426152515", "13122125070", "13488719967", "13253380582", "15811387659", "18811078403", "15074789079", "13718662312", "15904811438", "13671881670", "18611897055", "18612502605", "17610590516", "13911882334", "18201035149", "15989398767", "18760510612", "15986798611", "13269693662", "18867267013", "13699799098", "13601198564", "18617002397", "13817006742", "13810997870", "13068737193", "18318058117", "13761226350", "18817364673", "15163017558", "18618181390", "15921216058", "18732428298", "15858271120", "13554957166", "13661280135", "18565338514", "13381211069", "13818568589", "18600613904", "15900692337", "13761284625", "15013642031", "15889788715", "18643572332", "15801294953", "15204526142", "13923403685", "13823655480", "13544588756", "13632714810", "13911584029", "15921434562", "13716228824", "13681780695", "15801348981", "18513419112", "15021424664", "13510990302", "13718407801", "13552985204", "15818563109", "13410141358", "13823179606", "15010026012", "18610426065", "13601985061", "13410627430", "13910151845", "13810539569", "13823665150", "13810235234", "18603039738", "15279562995", "18600998959", "18201985925", "15265702759", "15000013730", "18507096653", "18749774435", "13918442031", "15172540961", "15259535150", "18874140288", "15268338007", "17364032303", "18321382110", "18355669716", "13651735597", "13646037453", "18701775947", "15604640822", "13918427610", "15302088250", "17623246460", "15146333502", "17516718950", "15129852908", "19186994966", "13661552030", "18621665349", "18602141272", "18916657226", "13482572117", "15821960200", "17800823124", "18938416312", "17760886780", "15101132001", "18601710509", "18174717528", "15651960755", "18297872160", "17865715887", "18217167981", "18817667681", "13818269514", "13776933868", "19821873679", "17601025808", "13738799994", "18066395591", "18651314510", "15000068278", "13217337690", "18686888038", "13371800161", "15313019932", "13207083009", "15107997910", "13681112531", "15545581461", "18600770285", "13126510206", "13751160464", "13864158729", "18810345532", "15920079572", "17812182709", "13927461762", "13066999392", "13521026220", "18310977559", "18613559252", "13817737009", "13718923723", "18604031636", "18910329446", "13058131018", "15820462676", "13530733581", "13422292838", "13681409671", "13421346450", "15919773954", "13686668678", "18611586910", "18211096525", "13982242442", "18515166781", "13918524951", "13600950833", "18820114813", "13510397123", "15583190719", "13802211682", "13501033116", "13077878686", "15201811577", "13817833239", "13466584063", "17701080409", "13713758983", "13031068100", "18301443010", "18600980778", "13466707768", "18016290125", "13076211991", "13716025713", "13829258079", "13311009350", "13715362215", "13699819624", "13810564081", "18510105866", "18825261620", "18721569852", "15013595622", "13922873739", "13482503856", "13728757302", "13811613539", "13266579229", "13544352278", "13381065655", "15711190677", "13521107908", "13028866267", "18610079115", "18116449235", "13811711013", "13510285705", "15910201081", "18507553503", "18688712309", "13113855900", "13590196465", "15975365916", "13510083065", "13021001776", "13311564358", "13522432597", "18709299417", "13011877213", "19149412162", "15618200266", "13773472669", "19957953488", "17614248045", "18621545875", "15895602115", "15121114580", "18233450502", "18506018858", "15201815150", "19858730801", "15601676087", "13918549573", "13867453650", "16605567497", "15026929092", "18221112291", "18221119178", "15952162821", "15750980811", "13402624767", "18916061596", "18353907376", "13291085101", "15267555947", "17521679954", "17521589974", "15519700077", "13456209622", "18621024075", "18770631223", "15821160462", "13681759194", "17721271795", "15151434542", "13651905042", "15305279740", "18930081263", "13917860042", "15208484847", "18986829158", "18217152198", "18358368155", "17721279176", "13738786694", "17701730643", "13391106980", "18896737856", "15810931336", "18262009037", "18501718453", "13917687590", "17530152839", "19850590790", "17855822917", "18516696252", "15151530509", "15312911888", "15895687816", "18795455692", "18756130921", "18829079918", "19822733602", "13524138501", "13585780563", "17314980871", "13402038241", "18621832185", "18822049506", "15921941453", "18704493597", "13297774955", "17857529547", "13758270830", "15155235181", "15605800108", "15348431486", "15121046608", "17621966679", "19854549848", "13487019999", "15398532811", "18801383824", "13618628849", "15001394217", "13681222016", "15819391015", "18201621688", "15821051454", "13681828109", "13410230403", "17620451810", "18913907680", "18101288287", "18201271873", "15598882289", "18500206234", "15509578469", "18026908422", "19510351964", "13789081439", "13613409809", "17621885285", "15821870632", "13581651688", "18810973584", "17612204620", "17853723051", "18518661018", "18519779475", "18610788589", "18201770287", "15801612286", "15313730335", "13699232587", "15600218596", "18810860768", "13466365001", "13632507010", "15101133957", "18612698967", "18611602768", "13501310497", "13552069266", "15618331121", "15800542945", "18862185892", "17887990287", "18183444388", "18765203981", "18221150021", "13564077687", "13917751774", "13166471215", "13817500504", "13917073868", "13625625724", "18817556368", "13761569564", "18557530054", "15755405326", "18621577657", "13755423701", "18327224514", "15136512151", "17621307616", "18351106861", "18557530220", "18556736729", "15995823102", "15601544262", "13934586921", "17501687719", "15050537514", "18872250681", "15150592501", "17347409670", "15821560831", "13810011919", "19976704581", "17343162184", "17608298432", "18621101925", "17777788668", "19834506816", "13810188462", "15001335560", "13301925618", "18600705531", "13026646202", "13240145753", "13269693670", "13073194419", "13241425342", "18817306808", "13613820932", "18210399167", "15719429193", "18611871248", "15000428358", "17394966639", "18826051820", "13001113909", "15801338075", "15699918143", "13911324759", "15113818895", "17633163764", "13265629217", "15889442116", "15220261876", "13537839897", "18518699186", "15631837377", "15510217722", "15101040449", "18636067872", "13426368308", "13520605792", "15810135035", "13269622223", "13581637407", "13466758490", "13811669907", "15110004986", "13811558688", "15999598776", "13811250833", "13701212507", "18621301128", "13852032071", "13817536884", "18662611911", "15900491802", "18516331186", "18217114797", "13149932406", "18539294623", "13918744836", "13817456776", "19145408676", "13671540655", "15000198819", "15652510216", "13683276454", "13795472451", "15989593045", "13810205967", "18121219323", "15810289317", "15800856013", "18743231710", "13304441732", "13760168282", "15910841674", "15120021406", "18810159565", "18514536713", "18078762156", "13718669921", "13661071051", "18911866168", "13764098416", "18612218156", "13917726024", "13701213736", "13723700105", "15001293583", "18017820721", "13817896538", "13641913423", "13581753712", "13413942641", "18320921170", "15801928559", "15726659766", "13366262002", "15725003000", "18211071872", "18033081760", "13671303906", "13811231819", "15810194792", "13761780003", "13718984565", "15801266845", "13585987687", "13045036617", "15190245054", "15001872736", "13913273005", "19821235646", "18374098960", "13480775479", "18310493238", "13751007021", "13682427737", "18320945046", "18344297009", "13691739396", "18627206642", "13554798325", "13418727205", "15001772001", "13601113464", "18673652536", "13120316808", "16619825268", "15858439814", "13116892726", "18503005281", "17777509333", "13521664561", "15155976775", "13818928465", "15910784197", "15818668873", "15110064969", "13817631147", "15021928026", "13764598526", "18935449984", "15353737877", "18860381470", "18260543577", "15896271843", "18855109622", "13339803192", "15162482371", "13764397548", "18260110968", "18656303977", "18800585751", "15079379651", "13667797350", "19121796512", "15245103469", "17347337062", "13439385507", "18217082623", "13784872153", "17718320995", "18379493096", "18801178422", "17702274875", "18211679253", "18382395602", "19913808742", "13810438260", "13564602438", "13122357116", "13932041655", "15832398876", "13818417862", "15231966269", "15910969728", "15910907965", "15629603288", "15012790142", "13501206131", "18612972807", "15810584081", "13817026047", "13715173697", "13717663017", "13260325905", "13681212360", "13552709246", "15618902502", "13585762331", "13911559082", "18610568257", "18612238113", "13910016582", "13661276795"}
	phones := []string{"15116936766", "18035158224", "18410869308", "13253329860", "17770206788", "13699266365", "13504467196", "15220221384", "18117112267", "15216809205", "15814052650", "18603041166", "13810782180", "17621986983", "18801823453", "18618245866", "17611719935", "13001920709", "13581936787", "13544115812", "13983588037", "15801294786", "18762129279", "18793192150", "13918402703", "13728687960", "17701031628", "15021759006", "13621914566", "18917973999", "18846101261", "18355643661", "13621219960", "13910953079", "15800492365", "18713816090", "15889633610", "13522108551", "17702274875"}
	onebatch := 2
	for i := 0; i < len(phones); i = i + onebatch {
		max := i + onebatch
		if len(phones) < max {
			max = len(phones)
		}

		fragment := phones[i:max]
		var w sync.WaitGroup
		for _, phone := range fragment {
			w.Add(1)
			go func(_phone string) {
				defer w.Done()
				loginResp, err := getOrCreateCellarAccount(_phone)
				if err != nil {
					fmt.Printf("%s fail %v", _phone, err)
					return
				}
				fmt.Printf("%s %s\n", loginResp.Data.UserPhone, loginResp.Data.Wallet)

				var count int64
				if err := GetDB().Model(&WalletUser{}).Where("phone=? and address=?", _phone, loginResp.Data.Wallet).Count(&count).Error; err != nil {
					fmt.Printf("%s find db error %v", _phone, err)
					return
				}
				if count > 0 {
					return
				}

				if err := GetDB().Save(&WalletUser{
					Phone:   loginResp.Data.UserPhone,
					Address: loginResp.Data.Wallet,
				}).Error; err != nil {
					fmt.Printf("%s save db error %v", _phone, err)
					return
				}
			}(phone)
		}
		w.Wait()
		fmt.Printf("%d one batch done\n", i)
	}
}

func TestFindWalletAddress(t *testing.T) {
	initConfig()
	ConnectDB()

	phones := []string{"13801002119", "15000213993", "17621120707", "15921622994", "13916806458", "15800317710", "18516152755", "13917464505", "13917551392", "18551135246", "18616364192", "15221388202", "15317019727", "13601759353", "13910010736", "18612259808", "18622761582", "18610725188", "13581604789", "13801173937", "13911119915", "13811982633", "18600644955", "18611601283", "13910693263", "13901390327", "18601293232", "13901128896", "18001606211", "18721690240", "13524783506", "13564710264", "18621010161", "15221787719", "15237159743", "13633819323", "15210250457", "13918050767", "17521061512", "15000988890", "13581773044", "18611338755", "13916219053", "15801339851", "15300157948", "13716339879", "13601131216", "18657169800", "18800010130", "18210652790", "13810041267", "13401086534", "13570877827", "13502870099", "18601233708", "18511865687", "13556862273", "13911766509", "13925279675", "18611601287", "18601252758", "15000710557", "17671769834", "18019701556", "17721220703", "18761806661", "15026731850", "13311852757", "13761607205", "15921388181", "15201849910", "18816623603", "17612105027", "15300507530", "13916529711", "17333952319", "13040664808", "15727535969", "18907468584", "18859695070", "15000827727", "18621645618", "15200223637", "17851566715", "15139048425", "13261614466", "18359196787", "15216849575", "13816467302", "18879519272", "15716001535", "18721845675", "18217610083", "15928235250", "15168250513", "13275176127", "18816523521", "18521092014", "16601800453", "15821794338", "17317570082", "13162789830", "18260926476", "18917838203", "15061025097", "18844683326", "13817153130", "15296608718", "18217585645", "19121031401", "19833044582", "17370709218", "15000699639", "17751371033", "15301700961", "18272671487", "13140446388", "13141320916", "18898641262", "17319729271", "17262565996", "17521709671", "18001813559", "13701984625", "19859805751", "13761603245", "18521372756", "13916644639", "13524881662", "18521726710", "19121279946", "15137809805", "18389890115", "18389199593", "17329432246", "19939921970", "13061818925", "17621313233", "18302125040", "17345136080", "14787852515", "19921949278", "15800930743", "13482248773", "18812126921", "18878457270", "17752689191", "13905909202", "18065918766", "15202160858", "15738389908", "18703970339", "15893508220", "13564205583", "18717891580", "13764529018", "13262622621", "18707282824", "18142321423", "15810573935", "17719867417", "18964679792", "15729386393", "13067249782", "16601940928", "13575038857", "19503827929", "13151195531", "17317305872", "13566378183", "13782178905", "13943344914", "17521532119", "15637218882", "19712908711", "15093954463", "18539576862", "17521773495", "15198441050", "18930059310", "15856912878", "13148302912", "13358857145", "15754568896", "13181877055", "17521080351", "18162326943", "17766476172", "15045674966", "17889785265", "15546176395", "16601169236", "13234661226", "13570458100", "18818395957", "13728861484", "13136760006", "13727860573", "18574103229", "18115560039", "13526618083", "18638764385", "18339179903", "18838278502", "18217688993", "18189695479", "18621603146", "18621390621", "18918353386", "15900486917", "18070774282", "17301747428", "13524540410", "15938552091", "13020288640", "15623969372", "18165744122", "13127921159", "18621615915", "18652078573", "15058323885", "17621180743", "18019378186", "13122372218", "15255184374", "17691376924", "16638160930", "18916017231", "18261046371", "15250956816", "18356468121", "19821227931", "19821051125", "17316330591", "18503707307", "15959772752", "13818499501", "18799167753", "18236586947", "18622186897", "13701724876", "18703480729", "13929150127", "18638608713", "16621175172", "13156305677", "18261882295", "18535345716", "15366765512", "13636358069", "18538593793", "13399056775", "15283543292", "18295110828", "13079793168", "13675511470", "13761467797", "17315726385", "13601803615", "15727748567", "15900534093", "15000361429", "15617682762", "13386886833", "13588853071", "18621627745", "13482057904", "13370029075", "13122902629", "13717791722", "17357100109", "15283928996", "13502805330", "13691682888", "19982009383", "18583241990", "18086840787", "13816890395", "13810610783", "13733199262", "15603076594", "18511423995", "18518932676", "13421467855", "15392729333", "13381739775", "13170359832", "13249799381", "18612938898", "17328733360", "18401674238", "18310789378", "18038012697", "15604836929", "13590376572", "15339775086", "18500089279", "15011540445", "13916568974", "19928726429", "13632024086", "15116936766", "18716017977", "15132023306", "18035158224", "18410869308", "13253329860", "17770206788", "15101545489", "13699266365", "13504467196", "15220221384", "18117112267", "17810243180", "15072683827", "15216809205", "15814052650", "18603041166", "13810782180", "17621986983", "18801823453", "18618245866", "17611719935", "18665659346", "13001920709", "13581936787", "13544115812", "13983588037", "13880762115", "15801294786", "18616642426", "18762129279", "18793192150", "13918402703", "13128745311", "13728687960", "17701031628", "15021759006", "13621914566", "18917973999", "18846101261", "15818665396", "18355643661", "18612788038", "13621219960", "13910953079", "15800492365", "18713816090", "15889633610", "13522108551", "18221122107", "15277389059", "13758860397", "13528780621", "18515899629", "18911934978", "15612665932", "13693390221", "18810596944", "15009886332", "18925850351", "18072741812", "13501638008", "15811499891", "18610926578", "15727327268", "13261779169", "13823376052", "18858167131", "17812211849", "17318916809", "18721948461", "18238296110", "15159550982", "13916641420", "13692370117", "13510759275", "15210533417", "17674062712", "18344048718", "15361022567", "13426152515", "13122125070", "13488719967", "13253380582", "15811387659", "18811078403", "15074789079", "13718662312", "15904811438", "13671881670", "18611897055", "18612502605", "17610590516", "13911882334", "18201035149", "15989398767", "18760510612", "15986798611", "13269693662", "18867267013", "13699799098", "13601198564", "18617002397", "13817006742", "13810997870", "13068737193", "18318058117", "13761226350", "18817364673", "15163017558", "18618181390", "15921216058", "18732428298", "15858271120", "13554957166", "13661280135", "18565338514", "13381211069", "13818568589", "18600613904", "15900692337", "13761284625", "15013642031", "15889788715", "18643572332", "15801294953", "15204526142", "13923403685", "13823655480", "13544588756", "13632714810", "13911584029", "15921434562", "13716228824", "13681780695", "15801348981", "18513419112", "15021424664", "13510990302", "13718407801", "13552985204", "15818563109", "13410141358", "13823179606", "15010026012", "18610426065", "13601985061", "13410627430", "13910151845", "13810539569", "13823665150", "13810235234", "18603039738", "15279562995", "18600998959", "18201985925", "15265702759", "15000013730", "18507096653", "18749774435", "13918442031", "15172540961", "15259535150", "18874140288", "15268338007", "17364032303", "18321382110", "18355669716", "13651735597", "13646037453", "18701775947", "15604640822", "13918427610", "15302088250", "17623246460", "15146333502", "17516718950", "15129852908", "19186994966", "13661552030", "18621665349", "18602141272", "18916657226", "13482572117", "15821960200", "17800823124", "18938416312", "17760886780", "15101132001", "18601710509", "18174717528", "15651960755", "18297872160", "17865715887", "18217167981", "18817667681", "13818269514", "13776933868", "19821873679", "17601025808", "13738799994", "18066395591", "18651314510", "15000068278", "13217337690", "18686888038", "13371800161", "15313019932", "13207083009", "15107997910", "13681112531", "15545581461", "18600770285", "13126510206", "13751160464", "13864158729", "18810345532", "15920079572", "17812182709", "13927461762", "13066999392", "13521026220", "18310977559", "18613559252", "13817737009", "13718923723", "18604031636", "18910329446", "13058131018", "15820462676", "13530733581", "13422292838", "13681409671", "13421346450", "15919773954", "13686668678", "18611586910", "18211096525", "13982242442", "18515166781", "13918524951", "13600950833", "18820114813", "13510397123", "15583190719", "13802211682", "13501033116", "13077878686", "15201811577", "13817833239", "13466584063", "17701080409", "13713758983", "13031068100", "18301443010", "18600980778", "13466707768", "18016290125", "13076211991", "13716025713", "13829258079", "13311009350", "13715362215", "13699819624", "13810564081", "18510105866", "18825261620", "18721569852", "15013595622", "13922873739", "13482503856", "13728757302", "13811613539", "13266579229", "13544352278", "13381065655", "15711190677", "13521107908", "13028866267", "18610079115", "18116449235", "13811711013", "13510285705", "15910201081", "18507553503", "18688712309", "13113855900", "13590196465", "15975365916", "13510083065", "13021001776", "13311564358", "13522432597", "18709299417", "13011877213", "19149412162", "15618200266", "13773472669", "19957953488", "17614248045", "18621545875", "15895602115", "15121114580", "18233450502", "18506018858", "15201815150", "19858730801", "15601676087", "13918549573", "13867453650", "16605567497", "15026929092", "18221112291", "18221119178", "15952162821", "15750980811", "13402624767", "18916061596", "18353907376", "13291085101", "15267555947", "17521679954", "17521589974", "15519700077", "13456209622", "18621024075", "18770631223", "15821160462", "13681759194", "17721271795", "15151434542", "13651905042", "15305279740", "18930081263", "13917860042", "15208484847", "18986829158", "18217152198", "18358368155", "17721279176", "13738786694", "17701730643", "13391106980", "18896737856", "15810931336", "18262009037", "18501718453", "13917687590", "17530152839", "19850590790", "17855822917", "18516696252", "15151530509", "15312911888", "15895687816", "18795455692", "18756130921", "18829079918", "19822733602", "13524138501", "13585780563", "17314980871", "13402038241", "18621832185", "18822049506", "15921941453", "18704493597", "13297774955", "17857529547", "13758270830", "15155235181", "15605800108", "15348431486", "15121046608", "17621966679", "19854549848", "13487019999", "15398532811", "18801383824", "13618628849", "15001394217", "13681222016", "15819391015", "18201621688", "15821051454", "13681828109", "13410230403", "17620451810", "18913907680", "18101288287", "18201271873", "15598882289", "18500206234", "15509578469", "18026908422", "19510351964", "13789081439", "13613409809", "17621885285", "15821870632", "13581651688", "18810973584", "17612204620", "17853723051", "18518661018", "18519779475", "18610788589", "18201770287", "15801612286", "15313730335", "13699232587", "15600218596", "18810860768", "13466365001", "13632507010", "15101133957", "18612698967", "18611602768", "13501310497", "13552069266", "15618331121", "15800542945", "18862185892", "17887990287", "18183444388", "18765203981", "18221150021", "13564077687", "13917751774", "13166471215", "13817500504", "13917073868", "13625625724", "18817556368", "13761569564", "18557530054", "15755405326", "18621577657", "13755423701", "18327224514", "15136512151", "17621307616", "18351106861", "18557530220", "18556736729", "15995823102", "15601544262", "13934586921", "17501687719", "15050537514", "18872250681", "15150592501", "17347409670", "15821560831", "13810011919", "19976704581", "17343162184", "17608298432", "18621101925", "17777788668", "19834506816", "13810188462", "15001335560", "13301925618", "18600705531", "13026646202", "13240145753", "13269693670", "13073194419", "13241425342", "18817306808", "13613820932", "18210399167", "15719429193", "18611871248", "15000428358", "17394966639", "18826051820", "13001113909", "15801338075", "15699918143", "13911324759", "15113818895", "17633163764", "13265629217", "15889442116", "15220261876", "13537839897", "18518699186", "15631837377", "15510217722", "15101040449", "18636067872", "13426368308", "13520605792", "15810135035", "13269622223", "13581637407", "13466758490", "13811669907", "15110004986", "13811558688", "15999598776", "13811250833", "13701212507", "18621301128", "13852032071", "13817536884", "18662611911", "15900491802", "18516331186", "18217114797", "13149932406", "18539294623", "13918744836", "13817456776", "19145408676", "13671540655", "15000198819", "15652510216", "13683276454", "13795472451", "15989593045", "13810205967", "18121219323", "15810289317", "15800856013", "18743231710", "13304441732", "13760168282", "15910841674", "15120021406", "18810159565", "18514536713", "18078762156", "13718669921", "13661071051", "18911866168", "13764098416", "18612218156", "13917726024", "13701213736", "13723700105", "15001293583", "18017820721", "13817896538", "13641913423", "13581753712", "13413942641", "18320921170", "15801928559", "15726659766", "13366262002", "15725003000", "18211071872", "18033081760", "13671303906", "13811231819", "15810194792", "13761780003", "13718984565", "15801266845", "13585987687", "13045036617", "15190245054", "15001872736", "13913273005", "19821235646", "18374098960", "13480775479", "18310493238", "13751007021", "13682427737", "18320945046", "18344297009", "13691739396", "18627206642", "13554798325", "13418727205", "15001772001", "13601113464", "18673652536", "13120316808", "16619825268", "15858439814", "13116892726", "18503005281", "17777509333", "13521664561", "15155976775", "13818928465", "15910784197", "15818668873", "15110064969", "13817631147", "15021928026", "13764598526", "18935449984", "15353737877", "18860381470", "18260543577", "15896271843", "18855109622", "13339803192", "15162482371", "13764397548", "18260110968", "18656303977", "18800585751", "15079379651", "13667797350", "19121796512", "15245103469", "17347337062", "13439385507", "18217082623", "13784872153", "17718320995", "18379493096", "18801178422", "17702274875", "18211679253", "18382395602", "19913808742", "13810438260", "13564602438", "13122357116", "13932041655", "15832398876", "13818417862", "15231966269", "15910969728", "15910907965", "15629603288", "15012790142", "13501206131", "18612972807", "15810584081", "13817026047", "13715173697", "13717663017", "13260325905", "13681212360", "13552709246", "15618902502", "13585762331", "13911559082", "18610568257", "18612238113", "13910016582", "13661276795"}
	notSetted := []string{}
	for _, phone := range phones {
		var address string
		if err := GetDB().Model(&WalletUser{}).Where("phone=?", phone).Select("address").Scan(&address).Error; err != nil {
			fmt.Printf("%s \n", phone)
			continue
		}
		fmt.Printf("%s %s\n", phone, address)
		if address == "" {
			notSetted = append(notSetted, phone)
		}
	}
	fmt.Printf("not setted %v\n", strings.Join(notSetted, "\",\""))
}

func initConfig() {
	viper.SetConfigName("config") // name of config file (without extension)
	viper.SetConfigType("yaml")   // REQUIRED if the config file does not have the extension in the name
	viper.AddConfigPath(".")      // optionally look for config in the working directory
	viper.AddConfigPath("..")     // optionally look for config in the working directory
	err := viper.ReadInConfig()   // Find and read the config file
	if err != nil {               // Handle errors reading the config file
		log.Fatalln(fmt.Errorf("fatal error config file: %w", err))
	}
}
